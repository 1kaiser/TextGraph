<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text as Graph - Exact Distill Implementation</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="text-as-graph.css">
    
    <!-- MathJax for font rendering consistency -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
    <div class="text-input-section" style="position: fixed; top: 20px; left: 20px; width: 300px; background: rgba(255,255,255,0.9); border: 1px solid #ddd; border-radius: 8px; padding: 15px; z-index: 1000;">
        <div class="drag-handle" style="position: absolute; top: -8px; right: -8px; width: 16px; height: 16px; background: #dc3545; border-radius: 50%; cursor: grab; z-index: 1001;"></div>
        <div style="text-align: center; margin-bottom: 10px; font-size: 14px; font-weight: 500;">Text as Graph</div>
        <input type="text" id="manual-text-input" placeholder="Enter text..." maxlength="100" value="Graphs are all around us" style="width: 100%; padding: 8px; font-size: 14px; border: 1px solid #ddd; border-radius: 4px; text-align: center;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
            <button id="update-graph" onclick="updateVisualization()" style="background: #4285f4; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px;">Update</button>
            <div style="font-size: 11px; color: #666;">
                <span id="char-count" style="color: rgb(108, 117, 125);">24</span>/100
            </div>
        </div>
    </div>
        
    <!-- Full Width Graph -->
    <div id='text-as-graph' style="width: 100%; min-height: 400px; position: relative;"></div>
    
    <script src="index.js"></script>
    <script>
        // Make the input box draggable
        let isDragging = false;
        let dragStartX = 0;
        let dragStartY = 0;
        let initialLeft = 0;
        let initialTop = 0;
        
        const draggableBox = document.querySelector('.text-input-section');
        const dragHandle = document.querySelector('.drag-handle');
        
        dragHandle.addEventListener('mousedown', (e) => {
            isDragging = true;
            dragStartX = e.clientX;
            dragStartY = e.clientY;
            
            const rect = draggableBox.getBoundingClientRect();
            initialLeft = rect.left;
            initialTop = rect.top;
            
            dragHandle.style.cursor = 'grabbing';
            e.preventDefault();
        });
        
        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            
            const deltaX = e.clientX - dragStartX;
            const deltaY = e.clientY - dragStartY;
            
            const newLeft = Math.max(0, Math.min(window.innerWidth - 300, initialLeft + deltaX));
            const newTop = Math.max(0, Math.min(window.innerHeight - 150, initialTop + deltaY));
            
            draggableBox.style.left = newLeft + 'px';
            draggableBox.style.top = newTop + 'px';
            draggableBox.style.right = 'auto';
        });
        
        document.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                draggableBox.style.cursor = 'move';
            }
        });
    </script>
</body>
</html>