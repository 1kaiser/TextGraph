parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"o0Wi":[function(require,module,exports) {
function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(){var e,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(t,o,i,a){var c=o&&o.prototype instanceof s?o:s,m=Object.create(c.prototype);return n(m,"_invoke",function(t,n,o){var i,a,c,s=0,m=o||[],l=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,a=0,c=e,h.n=n,u}};function f(t,n){for(a=t,c=n,r=0;!l&&s&&!o&&r<m.length;r++){var o,i=m[r],f=h.p,d=i[2];t>3?(o=d===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=t<2&&f<i[1])?(a=0,h.v=n,h.n=i[1]):f<d&&(o=t<3||i[0]>n||n>d)&&(i[4]=t,i[5]=n,h.n=d,a=0))}if(o||t>1)return u;throw l=!0,n}return function(o,m,d){if(s>1)throw TypeError("Generator is already running");for(l&&1===m&&f(m,d),a=m,c=d;(r=a<2?e:c)||!l;){i||(a?a<3?(a>1&&(h.n=-1),f(a,c)):h.n=c:h.v=c);try{if(s=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((r=(l=h.n<0)?c:t.call(n,h))!==u)break}catch(r){i=e,a=1,c=r}finally{s=1}}return{value:r,done:l}}}(t,i,a),!0),m}var u={};function s(){}function m(){}function l(){}r=Object.getPrototypeOf;var h=[][i]?r(r([][i]())):(n(r={},i,function(){return this}),r),f=l.prototype=s.prototype=Object.create(h);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,n(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return m.prototype=l,n(f,"constructor",l),n(l,"constructor",m),m.displayName="GeneratorFunction",n(l,a,"GeneratorFunction"),n(f),n(f,a,"Generator"),n(f,i,function(){return this}),n(f,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:d}})()}function n(e,t,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}(n=function(e,t,r,o){function a(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?i?i(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(a("next",0),a("throw",1),a("return",2))})(e,t,r,o)}function r(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function c(e){r(a,o,i,c,u,"next",e)}function u(e){r(a,o,i,c,u,"throw",e)}c(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(t){var n=s(t,"string");return"symbol"==e(n)?n:n+""}function s(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}console.log("üß† TextGraph: Loading EmbeddingGemma Demo Implementation...");var m=function(){return c(function e(){i(this,e),this.instance=null,this.isLoading=!1,this.isReady=!1,this.progress=0,this.status="Ready (Demo Mode)",this.error=null,this.modelName="onnx-community/embeddinggemma-300m-ONNX",this.embeddingDimension=768,this.device="demo"},[{key:"initialize",value:function(){var e=o(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:console.log("üöÄ TextGraph: Auto-initializing EmbeddingGemma Demo..."),this.isReady=!0,this.status="Ready for GAT computation (Demo)",this.instance={demo:!0};case 1:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadModel",value:function(){var e=o(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:if(!this.instance){e.n=1;break}return e.a(2,this.instance);case 1:return e.n=2,this.initialize();case 2:return e.a(2,this.instance)}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"generateEmbeddings",value:function(){var e=o(t().m(function e(n){var r,o,i,a,c,u,s=this,m=arguments;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"document",this.instance){e.n=1;break}return e.n=1,this.loadModel();case 1:return o=performance.now(),console.log("üîÑ TextGraph: Generating ".concat(r," embeddings for ").concat(n.length," texts (Demo)...")),e.p=2,i=n.map(function(e){return s.generateSemanticEmbedding(e,r)}),a=performance.now(),c=a-o,console.log("‚úÖ TextGraph: Generated ".concat(i.length," semantic embeddings in ").concat(c.toFixed(2),"ms")),console.log("‚ö° TextGraph: Average time per embedding: ".concat((c/i.length).toFixed(2),"ms")),e.a(2,i);case 3:throw e.p=3,u=e.v,console.error("‚ùå TextGraph: Embedding generation failed:",u),u;case 4:return e.a(2)}},e,this,[[2,3]])}));return function(t){return e.apply(this,arguments)}}()},{key:"generateSemanticEmbedding",value:function(e,t){for(var n=e.toLowerCase().replace(/[^a-zA-Z\s]/g,""),r=new Array(768).fill(0),o=0,i=0;i<n.length;i++)o+=n.charCodeAt(i)*(i+1);for(var a="query"===t?.15:-.15,c=0;c<768;c++){var u=0;u+=.3*Math.sin(.001*o*(c+1)),u+=.2*Math.cos(.002*o*(c+1)),u+=.1*Math.sin(.1*n.length*(c+1));var s=(n.match(/[aeiou]/g)||[]).length/n.length;u+=.1*Math.sin(s*Math.PI*(c+1)),u+=a*Math.cos(.01*(c+1));var m=this.hashText(n);u+=.15*Math.sin(1e-4*m*(c+1)),r[c]=Math.tanh(u)}return r}},{key:"hashText",value:function(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t)}},{key:"generateEmbedding",value:function(){var e=o(t().m(function e(n){var r,o,i=arguments;return t().w(function(e){for(;;)switch(e.n){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"document",e.n=1,this.generateEmbeddings([n],r);case 1:return o=e.v,e.a(2,o[0])}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"calculateCosineSimilarity",value:function(e,t){if(e.length!==t.length)throw new Error("Embedding dimensions must match");for(var n=0,r=0,o=0,i=0;i<e.length;i++)n+=e[i]*t[i],r+=e[i]*e[i],o+=t[i]*t[i];return r=Math.sqrt(r),o=Math.sqrt(o),0===r||0===o?0:n/(r*o)}},{key:"createEmbeddingAttentionMatrix",value:function(){var e=o(t().m(function e(n){var r,o,i,a,c,u,s,m,l,h,f,d=arguments;return t().w(function(e){for(;;)switch(e.n){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"document",o="query"===r?"query":"document",console.log("üîç TextGraph: Creating EmbeddingGemma attention matrix for ".concat(n.length," tokens (Demo)...")),e.n=1,this.generateEmbeddings(n,o);case 1:for(i=e.v,a=[],c=1,u=-1,s=0;s<n.length;s++){for(m=[],l=0;l<n.length;l++)s===l?m.push(0):(h=this.calculateCosineSimilarity(i[s],i[l]),f=(h+1)/2,m.push(f),f>u&&(u=f),f<c&&f>0&&(c=f));a.push(m)}return console.log("üìä TextGraph: EmbeddingGemma attention matrix created (".concat(c.toFixed(3)," - ").concat(u.toFixed(3),") (Demo)")),e.a(2,{queryTokens:n,attentionMatrix:a,minAttention:c,maxAttention:u,embeddings:i,computationDetails:{model:this.modelName+" (Demo)",taskType:o,dimensions:i[0]?i[0].length:768,method:"EmbeddingGemma Cosine Similarity (Demo)",device:"demo"}})}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getStatus",value:function(){return{isLoading:this.isLoading,isReady:this.isReady,progress:this.progress,status:this.status,error:this.error,modelName:this.modelName+" (Demo)",device:this.device,embeddingDimension:this.embeddingDimension}}}])}(),l=new m;l.initialize(),window.EmbeddingGemmaManager=l,console.log("üöÄ TextGraph: EmbeddingGemmaManager (Demo) attached to window globally"),console.log("‚úÖ TextGraph: EmbeddingGemma Demo ready for GAT computation");
},{}]},{},["o0Wi"], null)
//# sourceMappingURL=embedding-gemma-demo.16ec4c09.js.map